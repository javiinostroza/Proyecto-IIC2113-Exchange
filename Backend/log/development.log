  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (127.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "repo-base_development"[0m
  [1m[35m (124.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "repo-base_test"[0m
  [1m[35m (407.3ms)[0m  [1m[35mCREATE DATABASE "repo-base_development" ENCODING = 'utf8'[0m
  [1m[35m (292.0ms)[0m  [1m[35mCREATE DATABASE "repo-base_test" ENCODING = 'utf8'[0m
  [1m[35m (11.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT pg_try_advisory_lock(8601592641196976400)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to DeviseCreateUsers (20200819134707)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200819134707"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeviseCreateAdminUsers (20200819134711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "admin_users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_admin_users_on_email" ON "admin_users"  ("email")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_admin_users_on_reset_password_token" ON "admin_users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200819134711"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveAdminComments (20200819134718)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "active_admin_comments" ("id" bigserial primary key, "namespace" character varying, "body" text, "resource_type" character varying, "resource_id" bigint, "author_type" character varying, "author_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_active_admin_comments_on_resource_type_and_resource_id" ON "active_admin_comments"  ("resource_type", "resource_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_active_admin_comments_on_author_type_and_author_id" ON "active_admin_comments"  ("author_type", "author_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_active_admin_comments_on_namespace" ON "active_admin_comments"  ("namespace")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20200819134718"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUsernameToUsers (20201012190501)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "name" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "lastname" character varying[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012190501"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateWallets (20201012194106)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "wallets" ("id" bigserial primary key, "clp" integer, "user_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_732f6628c4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_wallets_on_user_id" ON "wallets"  ("user_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012194106"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCryptocurrencies (20201012194254)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "cryptocurrencies" ("id" bigserial primary key, "name" character varying, "value" float, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012194254"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateMarkets (20201012194405)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "markets" ("id" bigserial primary key, "clp" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012194405"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTransactions (20201012194815)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "transactions" ("id" bigserial primary key, "amount" float, "wallet_id" bigint NOT NULL, "cryptocurrency_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_819d2cd6db"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_2c8815a7ed"
FOREIGN KEY ("cryptocurrency_id")
  REFERENCES "cryptocurrencies" ("id")
)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_transactions_on_wallet_id" ON "transactions"  ("wallet_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_transactions_on_cryptocurrency_id" ON "transactions"  ("cryptocurrency_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012194815"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBalances (20201012195010)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "balances" ("id" bigserial primary key, "amount" float, "wallet_id" bigint NOT NULL, "market_id" bigint NOT NULL, "cryptocurrency_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_6da0332491"
FOREIGN KEY ("wallet_id")
  REFERENCES "wallets" ("id")
, CONSTRAINT "fk_rails_d7153359e6"
FOREIGN KEY ("market_id")
  REFERENCES "markets" ("id")
, CONSTRAINT "fk_rails_a607b4d74d"
FOREIGN KEY ("cryptocurrency_id")
  REFERENCES "cryptocurrencies" ("id")
)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_balances_on_wallet_id" ON "balances"  ("wallet_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_balances_on_market_id" ON "balances"  ("market_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_balances_on_cryptocurrency_id" ON "balances"  ("cryptocurrency_id")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201012195010"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddJtiToUser (20201015190949)
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users" ADD "jti" character varying[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE UNIQUE INDEX CONCURRENTLY "index_users_on_jti" ON "users"  ("jti")[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201015190949"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddBuyingpriceToCryptocurrencies (20201019223347)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "cryptocurrencies" ADD "buying_price" float[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201019223347"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddSellingpriceToCryptocurrencies (20201019223428)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "cryptocurrencies" ADD "selling_price" float[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201019223428"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to RemoveValueFromCryptocurrencies (20201019223653)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "cryptocurrencies" DROP COLUMN "value"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201019223653"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddBtfToMarkets (20201020015505)
  [1m[35m (26.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "markets" ADD "btf" float[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201020015505"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddBthToMarkets (20201020015552)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "markets" ADD "bth" float[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201020015552"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPartnerToUsers (20201020030106)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSHOW server_version_num[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "partner" boolean DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201020030106"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-10-30 06:03:54.975828"], ["updated_at", "2020-10-30 06:03:54.975828"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(8601592641196976400)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAdminUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "admin_users" WHERE "admin_users"."email" = $1 LIMIT $2[0m  [["email", "administrador@admin.cl"], ["LIMIT", 1]]
  [1m[36mAdminUser Create (0.5ms)[0m  [1m[32mINSERT INTO "admin_users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "administrador@admin.cl"], ["encrypted_password", "$2a$12$bJZK8c6FE9r67cyXLp875.YXhnHP/pAOvxHSKfgiZbWoglsF1Rf62"], ["created_at", "2020-10-30 06:04:05.674045"], ["updated_at", "2020-10-30 06:04:05.674045"]]
  [1m[35m (4.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMarket Create (0.6ms)[0m  [1m[32mINSERT INTO "markets" ("clp", "created_at", "updated_at", "btf", "bth") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["clp", 10000000], ["created_at", "2020-10-30 06:04:05.688218"], ["updated_at", "2020-10-30 06:04:05.688218"], ["btf", 900000.0], ["bth", 1000000.0]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCryptocurrency Create (0.4ms)[0m  [1m[32mINSERT INTO "cryptocurrencies" ("name", "created_at", "updated_at", "buying_price", "selling_price") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "BTF"], ["created_at", "2020-10-30 06:04:05.699712"], ["updated_at", "2020-10-30 06:04:05.699712"], ["buying_price", 2000.0], ["selling_price", 2100.0]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCryptocurrency Create (0.3ms)[0m  [1m[32mINSERT INTO "cryptocurrencies" ("name", "created_at", "updated_at", "buying_price", "selling_price") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "BTH"], ["created_at", "2020-10-30 06:04:05.705182"], ["updated_at", "2020-10-30 06:04:05.705182"], ["buying_price", 1500.0], ["selling_price", 1800.0]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "profe@uc.cl"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "name", "lastname", "jti", "partner") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["email", "profe@uc.cl"], ["encrypted_password", "$2a$12$d.Z.KKw4Oftk5igNYBzPwem.DLoUCNPRMrmRH38an/gFLCAQrbQ2i"], ["created_at", "2020-10-30 06:04:05.943118"], ["updated_at", "2020-10-30 06:04:05.943118"], ["name", "fernanda"], ["lastname", "sepúlveda"], ["jti", "6f77c51c-5fef-4296-bfa0-78365ea4207e"], ["partner", true]]
  [1m[35m (14.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mWallet Create (0.8ms)[0m  [1m[32mINSERT INTO "wallets" ("clp", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["clp", 82160], ["user_id", 1], ["created_at", "2020-10-30 06:04:05.984733"], ["updated_at", "2020-10-30 06:04:05.984733"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mMarket Load (0.2ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBalance Create (0.9ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 1], ["market_id", 1], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:04:06.005346"], ["updated_at", "2020-10-30 06:04:06.005346"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mBalance Create (0.5ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 1], ["market_id", 1], ["cryptocurrency_id", 2], ["created_at", "2020-10-30 06:04:06.015611"], ["updated_at", "2020-10-30 06:04:06.015611"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/register" for 172.21.0.1 at 2020-10-30 06:04:37 +0000
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#create as JSON
  Parameters: {"user"=>{"name"=>"javiera", "lastname"=>"inostroza", "email"=>"jminostroza@uc.cl", "password"=>"[FILTERED]"}, "registration"=>{"user"=>{"name"=>"javiera", "lastname"=>"inostroza", "email"=>"jminostroza@uc.cl", "password"=>"[FILTERED]"}}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jminostroza@uc.cl"], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "name", "lastname", "jti") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "jminostroza@uc.cl"], ["encrypted_password", "$2a$12$oT36Db4IEbDuQ/ofR7Qugu7mCKOvyDljU.3dt6ZNxa5887Djn0M7m"], ["created_at", "2020-10-30 06:04:38.261735"], ["updated_at", "2020-10-30 06:04:38.261735"], ["name", "javiera"], ["lastname", "inostroza"], ["jti", "7c6059a4-638a-4497-861c-be1870630ff4"]]
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[36mWallet Create (1.9ms)[0m  [1m[32mINSERT INTO "wallets" ("clp", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["clp", 63145], ["user_id", 2], ["created_at", "2020-10-30 06:04:38.290546"], ["updated_at", "2020-10-30 06:04:38.290546"]]
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mBalance Create (1.0ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 2], ["market_id", 1], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:04:38.345094"], ["updated_at", "2020-10-30 06:04:38.345094"]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[35m (33.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mMarket Load (1.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mBalance Create (0.6ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 2], ["market_id", 1], ["cryptocurrency_id", 2], ["created_at", "2020-10-30 06:04:38.399515"], ["updated_at", "2020-10-30 06:04:38.399515"]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:15:in `create'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/registrations_controller.rb:16)
Completed 201 Created in 417ms (Views: 2.3ms | ActiveRecord: 65.5ms | Allocations: 49484)


Started POST "/api/login" for 172.21.0.1 at 2020-10-30 06:04:44 +0000
Processing by SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"jminostroza@uc.cl", "password"=>"[FILTERED]"}, "session"=>{"user"=>{"email"=>"jminostroza@uc.cl", "password"=>"[FILTERED]"}}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "jminostroza@uc.cl"], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from respond_with at /myapp/app/controllers/sessions_controller.rb:5)
Completed 200 OK in 275ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 3563)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:04:45 +0000
Started GET "/api/markets" for 172.21.0.1 at 2020-10-30 06:04:45 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (2.2ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 41ms (Views: 6.1ms | ActiveRecord: 4.2ms | Allocations: 9764)


Processing by MarketsController#index as JSON
  Parameters: {"market"=>{}}
  Rendering markets/index.json.jbuilder
  [1m[36mMarket Load (0.9ms)[0m  [1m[34mSELECT "markets".* FROM "markets"[0m
  ↳ app/views/markets/index.json.jbuilder:1
  Rendered markets/_market.json.jbuilder (Duration: 1.4ms | Allocations: 173)
  Rendered markets/index.json.jbuilder (Duration: 8.8ms | Allocations: 1605)
Completed 200 OK in 25ms (Views: 22.4ms | ActiveRecord: 0.9ms | Allocations: 5931)


Started GET "/api/markets" for 172.21.0.1 at 2020-10-30 06:04:45 +0000
Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:04:45 +0000
Processing by MarketsController#index as JSON
  Parameters: {"market"=>{}}
Processing by CryptocurrenciesController#index as JSON
  Rendering markets/index.json.jbuilder
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mMarket Load (1.2ms)[0m  [1m[34mSELECT "markets".* FROM "markets"[0m
  ↳ app/views/markets/index.json.jbuilder:1
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered markets/_market.json.jbuilder (Duration: 0.9ms | Allocations: 91)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  Rendered markets/index.json.jbuilder (Duration: 10.5ms | Allocations: 2777)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
Completed 200 OK in 14ms (Views: 11.4ms | ActiveRecord: 1.2ms | Allocations: 3346)


  [1m[36mCryptocurrency Load (1.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 19ms (Views: 8.2ms | ActiveRecord: 2.7ms | Allocations: 4191)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:04:48 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:04:49 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 13ms (Views: 1.9ms | ActiveRecord: 0.9ms | Allocations: 4038)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:04:49 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.8ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 34ms (Views: 18.4ms | ActiveRecord: 2.7ms | Allocations: 11939)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:04:50 +0000
Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:04:50 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 1.2ms | Allocations: 3146)


  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (1.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 40ms (Views: 23.2ms | ActiveRecord: 5.3ms | Allocations: 11716)


Started GET "/api/transactions" for 172.21.0.1 at 2020-10-30 06:04:50 +0000
Processing by TransactionsController#index as JSON
  Parameters: {"transaction"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:6:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
  [1m[36mTransaction Load (0.5ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 9ms (Views: 3.5ms | ActiveRecord: 4.4ms | Allocations: 4704)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:04:51 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 1.0ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:04:51 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 12ms (Views: 2.4ms | ActiveRecord: 1.4ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:04:51 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 24ms (Views: 15.2ms | ActiveRecord: 2.7ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:05:04 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-30000, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mWallet Update (2.3ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 33145], ["updated_at", "2020-10-30 06:05:04.322828"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mBalance Load (1.2ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:53:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mBalance Update (0.6ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 14.285714285714286], ["updated_at", "2020-10-30 06:05:04.372311"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[36mMarket Update (0.4ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899985.7142857143], ["updated_at", "2020-10-30 06:05:04.381225"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[36mCryptocurrency Update (0.7ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "selling_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["selling_price", 2163.0], ["updated_at", "2020-10-30 06:05:04.387072"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mTransaction Create (1.2ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", -30000.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:05:04.420837"], ["updated_at", "2020-10-30 06:05:04.420837"]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 1.5ms | Allocations: 235)
TransactionMailer#transaction_email: processed outbound mail in 8.9ms
Delivered mail 5f9bad1082004_1ec2b0364c@84b1e237bfe5.mail (3055.3ms)
Date: Fri, 30 Oct 2020 06:05:04 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad1082004_1ec2b0364c@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto comprado es de: CLP$30000.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from buy_btf at /myapp/app/controllers/transactions_controller.rb:61)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:61:in `buy_btf'
Completed 201 Created in 3301ms (Views: 15.6ms | ActiveRecord: 35.1ms | Allocations: 58946)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:07 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 12ms (Views: 4.4ms | ActiveRecord: 1.9ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:07 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.8ms | ActiveRecord: 0.8ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:08 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.7ms | ActiveRecord: 1.1ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:08 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.8ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 20ms (Views: 13.4ms | ActiveRecord: 2.5ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:05:17 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-3000, "cryptocurrency_name"=>"BTH"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTH"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (1.0ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:65:in `buy_bth'
  [1m[36mWallet Update (0.5ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 30145], ["updated_at", "2020-10-30 06:05:17.564869"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:65:in `buy_bth'
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:65:in `buy_bth'
  [1m[36mBalance Load (1.1ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:66:in `buy_bth'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:67:in `buy_bth'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:67:in `buy_bth'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:67:in `buy_bth'
  [1m[36mBalance Update (0.5ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 1.6666666666666667], ["updated_at", "2020-10-30 06:05:17.588168"], ["id", 4]]
  ↳ app/controllers/transactions_controller.rb:67:in `buy_bth'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:67:in `buy_bth'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:69:in `buy_bth'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "bth" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["bth", 999998.3333333334], ["updated_at", "2020-10-30 06:05:17.596818"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:69:in `buy_bth'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:69:in `buy_bth'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:70:in `buy_bth'
  [1m[36mCryptocurrency Update (1.1ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "selling_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["selling_price", 1854.0], ["updated_at", "2020-10-30 06:05:17.604053"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:70:in `buy_bth'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:70:in `buy_bth'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:71:in `buy_bth'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:71:in `buy_bth'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:71:in `buy_bth'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", -3000.0], ["wallet_id", 2], ["cryptocurrency_id", 2], ["created_at", "2020-10-30 06:05:17.622556"], ["updated_at", "2020-10-30 06:05:17.622556"]]
  ↳ app/controllers/transactions_controller.rb:71:in `buy_bth'
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:71:in `buy_bth'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 3.1ms
Delivered mail 5f9bad1d9b562_1ec2b0365d5@84b1e237bfe5.mail (2584.9ms)
Date: Fri, 30 Oct 2020 06:05:17 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad1d9b562_1ec2b0365d5@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto comprado es de: CLP$3000.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTH</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from buy_bth at /myapp/app/controllers/transactions_controller.rb:74)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:74:in `buy_bth'
Completed 201 Created in 2689ms (Views: 12.7ms | ActiveRecord: 23.7ms | Allocations: 29042)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:20 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.7ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 12ms (Views: 5.7ms | ActiveRecord: 1.2ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:20 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 8ms (Views: 2.6ms | ActiveRecord: 0.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:20 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.9ms | ActiveRecord: 0.9ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:20 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.9ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.8ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 14.7ms | ActiveRecord: 3.2ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:05:31 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>10, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (0.4ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 30155], ["updated_at", "2020-10-30 06:05:31.768528"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (16.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (0.5ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 14.2807142857143], ["updated_at", "2020-10-30 06:05:31.801828"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899985.719285714], ["updated_at", "2020-10-30 06:05:31.808027"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.5ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1940.0], ["updated_at", "2020-10-30 06:05:31.816937"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (1.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (0.5ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 10.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:05:31.833882"], ["updated_at", "2020-10-30 06:05:31.833882"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.2ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 3.6ms
Delivered mail 5f9bad2bce43f_1ec2b0366be@84b1e237bfe5.mail (2524.4ms)
Date: Fri, 30 Oct 2020 06:05:31 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad2bce43f_1ec2b0366be@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$10.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2629ms (Views: 12.3ms | ActiveRecord: 31.8ms | Allocations: 28265)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:34 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 4.8ms | ActiveRecord: 0.9ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:34 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 8ms (Views: 2.9ms | ActiveRecord: 0.9ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:34 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 10ms (Views: 2.9ms | ActiveRecord: 0.8ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:34 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 21ms (Views: 15.3ms | ActiveRecord: 1.9ms | Allocations: 8817)


Started GET "/api/transactions" for 172.21.0.1 at 2020-10-30 06:05:40 +0000
Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:40 +0000
Processing by TransactionsController#index as JSON
Processing by WalletsController#index as JSON
  Parameters: {"transaction"=>{}}
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:6:in `index'
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 9ms (Views: 1.7ms | ActiveRecord: 2.7ms | Allocations: 5358)


  [1m[36mTransaction Load (1.1ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 21ms (Views: 12.1ms | ActiveRecord: 3.0ms | Allocations: 11041)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:41 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.2ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.2ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 16ms (Views: 11.1ms | ActiveRecord: 1.5ms | Allocations: 8828)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:42 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.9ms | ActiveRecord: 0.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:43 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 0.7ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:43 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.6ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 24ms (Views: 15.8ms | ActiveRecord: 2.4ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:05:49 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1000, "cryptocurrency_name"=>"BTH"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTH"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (0.5ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 31155], ["updated_at", "2020-10-30 06:05:49.836239"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (3.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (0.4ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 1.0000000000000036], ["updated_at", "2020-10-30 06:05:49.853703"], ["id", 4]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:84:in `sell_handler'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "bth" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["bth", 999998.9999999997], ["updated_at", "2020-10-30 06:05:49.861276"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:84:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:84:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.5ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1455.0], ["updated_at", "2020-10-30 06:05:49.868421"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1000.0], ["wallet_id", 2], ["cryptocurrency_id", 2], ["created_at", "2020-10-30 06:05:49.887031"], ["updated_at", "2020-10-30 06:05:49.887031"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.6ms
Delivered mail 5f9bad3ddb9e4_1e6d743674a@84b1e237bfe5.mail (2480.8ms)
Date: Fri, 30 Oct 2020 06:05:49 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad3ddb9e4_1e6d743674a@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1000.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTH</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2575ms (Views: 14.4ms | ActiveRecord: 19.2ms | Allocations: 28268)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:52 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 3.1ms | ActiveRecord: 0.8ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:05:52 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 2.3ms | ActiveRecord: 0.8ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:05:52 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 3.3ms | ActiveRecord: 0.9ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:05:52 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 26ms (Views: 15.8ms | ActiveRecord: 2.7ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:06:02 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (0.7ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 31156], ["updated_at", "2020-10-30 06:06:02.586423"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (17.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (1.6ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (1.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (1.4ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 14.280198821796773], ["updated_at", "2020-10-30 06:06:02.643543"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.9ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899985.7198011779], ["updated_at", "2020-10-30 06:06:02.661609"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.6ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1881.8], ["updated_at", "2020-10-30 06:06:02.680572"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (1.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (1.1ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:06:02.710129"], ["updated_at", "2020-10-30 06:06:02.710129"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.2ms
Delivered mail 5f9bad4aaf7ee_1e6d74368fc@84b1e237bfe5.mail (2547.3ms)
Date: Fri, 30 Oct 2020 06:06:02 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad4aaf7ee_1e6d74368fc@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2709ms (Views: 12.9ms | ActiveRecord: 41.0ms | Allocations: 28275)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:06:05 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.8ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 12ms (Views: 4.8ms | ActiveRecord: 1.3ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:06:05 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 2.3ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:06:05 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.3ms | ActiveRecord: 0.9ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:06:05 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 22ms (Views: 15.7ms | ActiveRecord: 2.1ms | Allocations: 8817)


Started GET "/api/transactions" for 172.21.0.1 at 2020-10-30 06:06:24 +0000
Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:06:24 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
Processing by TransactionsController#index as JSON
  Parameters: {"transaction"=>{}}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (2.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
  ↳ app/controllers/transactions_controller.rb:6:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
Completed 200 OK in 13ms (Views: 3.5ms | ActiveRecord: 4.0ms | Allocations: 5357)


DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
  [1m[36mTransaction Load (0.6ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 40ms (Views: 28.6ms | ActiveRecord: 4.2ms | Allocations: 13510)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:06:24 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.2ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 23ms (Views: 15.3ms | ActiveRecord: 2.4ms | Allocations: 8817)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:06:28 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 3.1ms | ActiveRecord: 0.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:06:28 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 10ms (Views: 2.6ms | ActiveRecord: 0.8ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:06:28 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 15.5ms | ActiveRecord: 2.7ms | Allocations: 8817)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:06:35 +0000
Started GET "/api/markets" for 172.21.0.1 at 2020-10-30 06:06:35 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by MarketsController#index as JSON
  Parameters: {"market"=>{}}
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  Rendering markets/index.json.jbuilder
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mMarket Load (1.1ms)[0m  [1m[34mSELECT "markets".* FROM "markets"[0m
  ↳ app/views/markets/index.json.jbuilder:1
  [1m[36mCryptocurrency Load (3.1ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  Rendered markets/_market.json.jbuilder (Duration: 0.4ms | Allocations: 94)
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
  Rendered markets/index.json.jbuilder (Duration: 7.0ms | Allocations: 1792)
Completed 200 OK in 19ms (Views: 7.4ms | ActiveRecord: 3.7ms | Allocations: 5260)


Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 1.1ms | Allocations: 2617)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:06:39 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:06:39 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 9ms (Views: 0.9ms | ActiveRecord: 1.6ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:06:39 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (1.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 24ms (Views: 15.8ms | ActiveRecord: 2.9ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:07:23 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (1.8ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 31157], ["updated_at", "2020-10-30 06:07:23.371183"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (20.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (1.2ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 14.279667415696258], ["updated_at", "2020-10-30 06:07:23.407988"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899985.7203325841], ["updated_at", "2020-10-30 06:07:23.415206"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.8ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1825.346], ["updated_at", "2020-10-30 06:07:23.423373"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (2.9ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:07:23.439860"], ["updated_at", "2020-10-30 06:07:23.439860"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.1ms
Delivered mail 5f9bad9b6e884_1e6d7436982@84b1e237bfe5.mail (2580.2ms)
Date: Fri, 30 Oct 2020 06:07:23 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bad9b6e884_1e6d7436982@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2690ms (Views: 12.1ms | ActiveRecord: 40.0ms | Allocations: 28302)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:07:26 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 9ms (Views: 3.4ms | ActiveRecord: 0.8ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:07:26 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 0.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:07:26 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 8ms (Views: 1.6ms | ActiveRecord: 0.7ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:07:26 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 15.4ms | ActiveRecord: 2.1ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:09:05 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>987654321987654300, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/transactions_controller.rb:22)
Completed 400 Bad Request in 20ms (Views: 2.1ms | ActiveRecord: 2.6ms | Allocations: 6300)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:09:33 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-3000, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.7ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (1.6ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mWallet Update (0.4ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28157], ["updated_at", "2020-10-30 06:09:33.962784"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mBalance Load (1.1ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:53:in `buy_btf'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mBalance Update (0.5ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.666629967707395], ["updated_at", "2020-10-30 06:09:33.984809"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.333370032], ["updated_at", "2020-10-30 06:09:33.993330"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[36mCryptocurrency Update (0.6ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "selling_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["selling_price", 2227.89], ["updated_at", "2020-10-30 06:09:33.999160"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", -3000.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:09:34.016142"], ["updated_at", "2020-10-30 06:09:34.016142"]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.2ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 6.1ms
Delivered mail 5f9bae1e70f0_1ec2b037084@84b1e237bfe5.mail (2580.9ms)
Date: Fri, 30 Oct 2020 06:09:34 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bae1e70f0_1ec2b037084@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto comprado es de: CLP$3000.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from buy_btf at /myapp/app/controllers/transactions_controller.rb:61)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:61:in `buy_btf'
Completed 201 Created in 2679ms (Views: 11.1ms | ActiveRecord: 20.9ms | Allocations: 29054)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:09:36 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 11ms (Views: 3.4ms | ActiveRecord: 1.9ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:09:37 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.9ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:09:37 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.7ms | ActiveRecord: 1.4ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:09:37 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (1.0ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 27ms (Views: 17.2ms | ActiveRecord: 3.1ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:09:48 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-50000, "cryptocurrency_name"=>"BTH"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTH"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/transactions_controller.rb:22)
Completed 400 Bad Request in 17ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 4812)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:09:54 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-50000, "cryptocurrency_name"=>"BTH"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTH"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.7ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/transactions_controller.rb:22)
Completed 400 Bad Request in 21ms (Views: 1.6ms | ActiveRecord: 3.0ms | Allocations: 4812)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:10:01 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>50000000, "cryptocurrency_name"=>"BTH"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTH"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.6ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/transactions_controller.rb:22)
Completed 400 Bad Request in 17ms (Views: 0.8ms | ActiveRecord: 2.0ms | Allocations: 4814)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:10:05 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>50000000, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/transactions_controller.rb:22)
Completed 400 Bad Request in 21ms (Views: 0.4ms | ActiveRecord: 3.1ms | Allocations: 4814)


Started GET "/api/transactions" for 172.21.0.1 at 2020-10-30 06:10:09 +0000
Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:10:09 +0000
Processing by WalletsController#index as JSON
Processing by TransactionsController#index as JSON
  Parameters: {"wallet"=>{}}
  Parameters: {"transaction"=>{}}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (2.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
  [1m[36mWallet Load (1.1ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
  ↳ app/controllers/transactions_controller.rb:6:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
Completed 200 OK in 11ms (Views: 2.1ms | ActiveRecord: 3.4ms | Allocations: 5118)


DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
  [1m[36mTransaction Load (1.3ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.7ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 55ms (Views: 42.2ms | ActiveRecord: 4.0ms | Allocations: 16259)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:10:09 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (1.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 22ms (Views: 15.5ms | ActiveRecord: 2.6ms | Allocations: 8817)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:10:33 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.6ms | ActiveRecord: 1.0ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:10:33 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 10ms (Views: 1.4ms | ActiveRecord: 1.5ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:10:33 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 17.1ms | ActiveRecord: 2.3ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:10:49 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (1.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mWallet Update (1.4ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28156], ["updated_at", "2020-10-30 06:10:49.518161"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[35m (23.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mBalance Load (1.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:53:in `buy_btf'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mMarket Load (1.1ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mCryptocurrency Load (1.2ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mBalance Update (1.4ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.667078822902226], ["updated_at", "2020-10-30 06:10:49.591697"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (23.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[36mMarket Update (1.7ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.3329211768], ["updated_at", "2020-10-30 06:10:49.631341"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[36mCryptocurrency Update (1.5ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "selling_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["selling_price", 2294.7266999999997], ["updated_at", "2020-10-30 06:10:49.652916"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mTransaction Create (0.7ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", -1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:10:49.681165"], ["updated_at", "2020-10-30 06:10:49.681165"]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 3.3ms
Delivered mail 5f9bae69a9b64_1e6d743711d@84b1e237bfe5.mail (2553.5ms)
Date: Fri, 30 Oct 2020 06:10:49 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bae69a9b64_1e6d743711d@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto comprado es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from buy_btf at /myapp/app/controllers/transactions_controller.rb:61)
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:61:in `buy_btf'
Completed 201 Created in 2767ms (Views: 13.0ms | ActiveRecord: 73.4ms | Allocations: 29055)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:10:52 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 11ms (Views: 4.2ms | ActiveRecord: 1.2ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:10:52 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 2.2ms | ActiveRecord: 0.5ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:10:52 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.6ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 14ms (Views: 1.8ms | ActiveRecord: 1.1ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:10:52 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 16.6ms | ActiveRecord: 2.3ms | Allocations: 8817)


Started GET "/api/transactions" for 172.21.0.1 at 2020-10-30 06:10:54 +0000
Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:10:54 +0000
Processing by TransactionsController#index as JSON
  Parameters: {"transaction"=>{}}
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (2.0ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:6:in `index'
  [1m[36mWallet Load (1.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/transactions_controller.rb:8)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 14ms (Views: 3.8ms | ActiveRecord: 1.7ms | Allocations: 5358)


  [1m[36mTransaction Load (2.8ms)[0m  [1m[34mSELECT "transactions".* FROM "transactions" WHERE "transactions"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.7ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
  [1m[36mCACHE Cryptocurrency Load (0.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:8:in `index'
Completed 200 OK in 50ms (Views: 36.8ms | ActiveRecord: 7.4ms | Allocations: 17913)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:10:54 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.8ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 21ms (Views: 14.4ms | ActiveRecord: 2.5ms | Allocations: 8817)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:11:00 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 3.4ms | ActiveRecord: 0.9ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:11:00 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 3.0ms | ActiveRecord: 1.0ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:11:01 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.8ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.9ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 26ms (Views: 14.9ms | ActiveRecord: 3.1ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:11:21 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>-1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.2ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.7ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mWallet Update (0.7ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28155], ["updated_at", "2020-10-30 06:11:21.101398"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[35m (3.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:52:in `buy_btf'
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/transactions_controller.rb:53:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mMarket Load (0.6ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mCryptocurrency Load (0.9ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[36mBalance Update (0.6ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.667514604644749], ["updated_at", "2020-10-30 06:11:21.125508"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:54:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[36mMarket Update (0.5ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.3324853953], ["updated_at", "2020-10-30 06:11:21.131323"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:56:in `buy_btf'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[36mCryptocurrency Update (0.6ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "selling_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["selling_price", 2363.568501], ["updated_at", "2020-10-30 06:11:21.137473"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:57:in `buy_btf'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mCryptocurrency Load (1.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[36mTransaction Create (0.6ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", -1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:11:21.159962"], ["updated_at", "2020-10-30 06:11:21.159962"]]
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:58:in `buy_btf'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.2ms
Delivered mail 5f9bae8929257_1ec2b0372c9@84b1e237bfe5.mail (2624.3ms)
Date: Fri, 30 Oct 2020 06:11:21 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bae8929257_1ec2b0372c9@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto comprado es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from buy_btf at /myapp/app/controllers/transactions_controller.rb:61)
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:61:in `buy_btf'
Completed 201 Created in 2714ms (Views: 10.2ms | ActiveRecord: 19.9ms | Allocations: 29049)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:11:23 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 9ms (Views: 3.3ms | ActiveRecord: 1.1ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:11:24 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 0.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:11:24 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 14ms (Views: 1.8ms | ActiveRecord: 2.0ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:11:24 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (1.0ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 34ms (Views: 19.6ms | ActiveRecord: 3.1ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:16:57 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.6ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (1.0ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (0.6ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28156], ["updated_at", "2020-10-30 06:16:57.422274"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.6ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (1.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (0.5ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.666966763303934], ["updated_at", "2020-10-30 06:16:57.440121"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.9ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.3330332363], ["updated_at", "2020-10-30 06:16:57.445193"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.5ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1770.58562], ["updated_at", "2020-10-30 06:16:57.455330"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:16:57.472930"], ["updated_at", "2020-10-30 06:16:57.472930"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.2ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.6ms
Delivered mail 5f9bafd975a39_1ec2b0373b5@84b1e237bfe5.mail (2781.4ms)
Date: Fri, 30 Oct 2020 06:16:57 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bafd975a39_1ec2b0373b5@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2879ms (Views: 11.8ms | ActiveRecord: 20.1ms | Allocations: 28480)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:17:00 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 13ms (Views: 5.7ms | ActiveRecord: 2.0ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:17:00 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (1.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 4.5ms | ActiveRecord: 2.0ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:17:00 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 15ms (Views: 1.6ms | ActiveRecord: 2.6ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:17:01 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.3ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 25ms (Views: 15.3ms | ActiveRecord: 2.4ms | Allocations: 8820)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:30:34 +0000
Started GET "/api/markets" for 172.21.0.1 at 2020-10-30 06:30:34 +0000
Processing by CryptocurrenciesController#index as JSON
Processing by MarketsController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  Parameters: {"market"=>{}}
  Rendering markets/index.json.jbuilder
  [1m[36mMarket Load (3.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets"[0m
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/views/markets/index.json.jbuilder:1
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  Rendered markets/_market.json.jbuilder (Duration: 0.7ms | Allocations: 91)
  Rendered markets/index.json.jbuilder (Duration: 15.0ms | Allocations: 2928)
Completed 200 OK in 18ms (Views: 13.9ms | ActiveRecord: 3.0ms | Allocations: 3372)


  [1m[36mCryptocurrency Load (4.0ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 24ms (Views: 5.1ms | ActiveRecord: 9.0ms | Allocations: 4921)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:30:37 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 5ms (Views: 1.9ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:30:37 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 8ms (Views: 1.5ms | ActiveRecord: 1.1ms | Allocations: 2828)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:30:37 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 26ms (Views: 16.3ms | ActiveRecord: 2.8ms | Allocations: 8826)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:30:44 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (1.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (0.9ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28157], ["updated_at", "2020-10-30 06:30:44.983939"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (4.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (0.7ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.666401978416514], ["updated_at", "2020-10-30 06:30:45.008177"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.6ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.3335980208], ["updated_at", "2020-10-30 06:30:45.012442"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (0.7ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1717.4680514], ["updated_at", "2020-10-30 06:30:45.021428"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (0.9ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:30:45.038874"], ["updated_at", "2020-10-30 06:30:45.038874"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.2ms
Delivered mail 5f9bb315ba58_1ec2b037499@84b1e237bfe5.mail (2865.5ms)
Date: Fri, 30 Oct 2020 06:30:45 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bb315ba58_1ec2b037499@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2954ms (Views: 3.1ms | ActiveRecord: 19.8ms | Allocations: 28301)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:30:47 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.8ms | ActiveRecord: 0.9ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:30:48 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (1.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 2.5ms | ActiveRecord: 1.7ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:30:48 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 9ms (Views: 1.7ms | ActiveRecord: 0.7ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:30:48 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 28ms (Views: 18.0ms | ActiveRecord: 3.1ms | Allocations: 8817)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:32:25 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 7ms (Views: 4.0ms | ActiveRecord: 0.6ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:32:25 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.6ms | ActiveRecord: 1.0ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:32:25 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.5ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 22ms (Views: 13.1ms | ActiveRecord: 2.4ms | Allocations: 8817)


Started POST "/api/transactions" for 172.21.0.1 at 2020-10-30 06:32:39 +0000
Processing by TransactionsController#create as JSON
  Parameters: {"transaction"=>{"amount"=>1, "cryptocurrency_name"=>"BTF"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:8000)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:43:in `set_create_params'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."name" = $1 LIMIT $2[0m  [["name", "BTF"], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:46:in `set_create_params'
  [1m[36mMarket Load (0.8ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:47:in `set_create_params'
  [1m[36mBalance Load (1.0ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1 AND "balances"."cryptocurrency_id" = $2 ORDER BY "balances"."id" ASC LIMIT $3[0m  [["wallet_id", 2], ["cryptocurrency_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:48:in `set_create_params'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[36mWallet Update (1.2ms)[0m  [1m[33mUPDATE "wallets" SET "clp" = $1, "updated_at" = $2 WHERE "wallets"."id" = $3[0m  [["clp", 28158], ["updated_at", "2020-10-30 06:32:39.280853"], ["id", 2]]
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:110:in `update_amounts'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[36mBalance Update (0.5ms)[0m  [1m[33mUPDATE "balances" SET "amount" = $1, "updated_at" = $2 WHERE "balances"."id" = $3[0m  [["amount", 15.665819725955277], ["updated_at", "2020-10-30 06:32:39.304864"], ["id", 3]]
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:112:in `update_amounts'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[36mMarket Update (0.4ms)[0m  [1m[33mUPDATE "markets" SET "btf" = $1, "updated_at" = $2 WHERE "markets"."id" = $3[0m  [["btf", 899984.3341802735], ["updated_at", "2020-10-30 06:32:39.310065"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:80:in `sell_handler'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[36mCryptocurrency Update (1.0ms)[0m  [1m[33mUPDATE "cryptocurrencies" SET "buying_price" = $1, "updated_at" = $2 WHERE "cryptocurrencies"."id" = $3[0m  [["buying_price", 1665.9440098579998], ["updated_at", "2020-10-30 06:32:39.315701"], ["id", 1]]
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:88:in `sell_handler'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mWallet Load (0.3ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[36mTransaction Create (1.3ms)[0m  [1m[32mINSERT INTO "transactions" ("amount", "wallet_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["amount", 1.0], ["wallet_id", 2], ["cryptocurrency_id", 1], ["created_at", "2020-10-30 06:32:39.332741"], ["updated_at", "2020-10-30 06:32:39.332741"]]
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/transactions_controller.rb:89:in `sell_handler'
  Rendering transaction_mailer/transaction_email.html.erb within layouts/mailer
  Rendered transaction_mailer/transaction_email.html.erb within layouts/mailer (Duration: 0.1ms | Allocations: 11)
TransactionMailer#transaction_email: processed outbound mail in 2.5ms
Delivered mail 5f9bb3875416b_1e6d74375fd@84b1e237bfe5.mail (2669.2ms)
Date: Fri, 30 Oct 2020 06:32:39 +0000
From: exchangetendds@gmail.com
To: jminostroza@uc.cl
Message-ID: <5f9bb3875416b_1e6d74375fd@84b1e237bfe5.mail>
Subject: =?UTF-8?Q?Transacci=C3=B3n_Exitosa!?=
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf=
-8" />=0D
    <style>=0D
      /* Email styles need to be inline */=0D
    </style>=0D
  </head>=0D
=0D
  <body>=0D
    <!DOCTYPE html>=0D
<html>=0D
  <head>=0D
    <meta content=3D'text/html; charset=3DUTF-8' http-equiv=3D'Content-Ty=
pe' />=0D
  </head>=0D
  <body>=0D
    <h1>Estimado javiera: </h1>=0D
    <h2>Gracias por transar en Ex-Change Ten </h2>=0D
    <p>=0D
      Su transacci=C3=B3n ha sido procesada correctamente <br>=0D
    </p>=0D
        <p>=0D
        El monto vendido es de: CLP$1.0.=0D
        </p>=0D
    <p>Para la cryptomoneda: BTF</p>=0D
    <p>Gracias por preferirnos, vuelva pronto.</p>=0D
  </body>=0D
</html>=0D
  </body>=0D
</html>=0D

DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from sell_handler at /myapp/app/controllers/transactions_controller.rb:92)
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/transactions_controller.rb:92:in `sell_handler'
Completed 201 Created in 2753ms (Views: 4.3ms | ActiveRecord: 19.3ms | Allocations: 28281)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:32:42 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.5ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 4.2ms | ActiveRecord: 1.0ms | Allocations: 2950)


Started GET "/api/cryptocurrencies" for 172.21.0.1 at 2020-10-30 06:32:42 +0000
Processing by CryptocurrenciesController#index as JSON
  Parameters: {"cryptocurrency"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/cryptocurrencies_controller.rb:6)
  [1m[36mCryptocurrency Load (0.7ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies"[0m
  ↳ app/controllers/cryptocurrencies_controller.rb:6:in `index'
Completed 200 OK in 10ms (Views: 4.9ms | ActiveRecord: 1.2ms | Allocations: 2950)


Started GET "/api/wallets" for 172.21.0.1 at 2020-10-30 06:32:42 +0000
Processing by WalletsController#index as JSON
  Parameters: {"wallet"=>{}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/wallets_controller.rb:5:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/wallets_controller.rb:5)
Completed 200 OK in 11ms (Views: 1.9ms | ActiveRecord: 0.9ms | Allocations: 2804)


Started GET "/api/balances" for 172.21.0.1 at 2020-10-30 06:32:42 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:4:in `index'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from index at /myapp/app/controllers/balances_controller.rb:6)
  [1m[36mBalance Load (0.4ms)[0m  [1m[34mSELECT "balances".* FROM "balances" WHERE "balances"."wallet_id" = $1[0m  [["wallet_id", 2]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mMarket Load (0.3ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCACHE Market Load (0.0ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
  [1m[36mCryptocurrency Load (0.3ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/balances_controller.rb:6:in `index'
Completed 200 OK in 29ms (Views: 19.7ms | ActiveRecord: 2.2ms | Allocations: 8818)


  [1m[35m (2.2ms)[0m  [1m[35mCREATE DATABASE "repo-base_development" ENCODING = 'utf8'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "repo-base_test" ENCODING = 'utf8'[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(8601592641196976400)[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(8601592641196976400)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAdminUser Exists? (30.9ms)[0m  [1m[34mSELECT 1 AS one FROM "admin_users" WHERE "admin_users"."email" = $1 LIMIT $2[0m  [["email", "administrador@admin.cl"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mMarket Create (2.9ms)[0m  [1m[32mINSERT INTO "markets" ("clp", "created_at", "updated_at", "btf", "bth") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["clp", 10000000], ["created_at", "2020-11-30 04:23:59.774677"], ["updated_at", "2020-11-30 04:23:59.774677"], ["btf", 900000.0], ["bth", 1000000.0]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCryptocurrency Create (1.5ms)[0m  [1m[32mINSERT INTO "cryptocurrencies" ("name", "created_at", "updated_at", "buying_price", "selling_price") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "BTF"], ["created_at", "2020-11-30 04:23:59.798824"], ["updated_at", "2020-11-30 04:23:59.798824"], ["buying_price", 2000.0], ["selling_price", 2100.0]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCryptocurrency Create (0.4ms)[0m  [1m[32mINSERT INTO "cryptocurrencies" ("name", "created_at", "updated_at", "buying_price", "selling_price") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "BTH"], ["created_at", "2020-11-30 04:23:59.806481"], ["updated_at", "2020-11-30 04:23:59.806481"], ["buying_price", 1500.0], ["selling_price", 1800.0]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (31.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "profe@uc.cl"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mWallet Create (2.0ms)[0m  [1m[32mINSERT INTO "wallets" ("clp", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["clp", 54006], ["user_id", 1], ["created_at", "2020-11-30 04:24:00.303370"], ["updated_at", "2020-11-30 04:24:00.303370"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mBalance Create (2.7ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 1], ["market_id", 1], ["cryptocurrency_id", 1], ["created_at", "2020-11-30 04:24:00.336909"], ["updated_at", "2020-11-30 04:24:00.336909"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mWallet Load (0.4ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mBalance Create (0.9ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 1], ["market_id", 1], ["cryptocurrency_id", 2], ["created_at", "2020-11-30 04:24:00.353954"], ["updated_at", "2020-11-30 04:24:00.353954"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Started POST "/api/register" for 172.21.0.1 at 2020-11-30 04:24:34 +0000
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RegistrationsController#create as JSON
  Parameters: {"user"=>{"name"=>"jazmin", "lastname"=>"juliana", "email"=>"jaz@hotmail.com", "password"=>"[FILTERED]"}, "registration"=>{"user"=>{"name"=>"jazmin", "lastname"=>"juliana", "email"=>"jaz@hotmail.com", "password"=>"[FILTERED]"}}}
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jaz@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[36mUser Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at", "name", "lastname", "jti") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "jaz@hotmail.com"], ["encrypted_password", "$2a$12$ViNTTr.C./hM.DzDb4a.yO9VhJVc5n75bujyxVESpqXBNnOOXSBRS"], ["created_at", "2020-11-30 04:24:35.154771"], ["updated_at", "2020-11-30 04:24:35.154771"], ["name", "jazmin"], ["lastname", "juliana"], ["jti", "0038ce31-9c38-4efc-a984-abb8b70d21e6"]]
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:7:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[36mWallet Create (2.6ms)[0m  [1m[32mINSERT INTO "wallets" ("clp", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["clp", 52839], ["user_id", 3], ["created_at", "2020-11-30 04:24:35.249316"], ["updated_at", "2020-11-30 04:24:35.249316"]]
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:11:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mWallet Load (0.5ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mMarket Load (0.5ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mCryptocurrency Load (0.6ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[36mBalance Create (1.1ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 4], ["market_id", 1], ["cryptocurrency_id", 1], ["created_at", "2020-11-30 04:24:35.351976"], ["updated_at", "2020-11-30 04:24:35.351976"]]
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[35m (22.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:13:in `create'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mWallet Load (0.7ms)[0m  [1m[34mSELECT "wallets".* FROM "wallets" WHERE "wallets"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mMarket Load (0.4ms)[0m  [1m[34mSELECT "markets".* FROM "markets" WHERE "markets"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mCryptocurrency Load (0.4ms)[0m  [1m[34mSELECT "cryptocurrencies".* FROM "cryptocurrencies" WHERE "cryptocurrencies"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[36mBalance Create (0.8ms)[0m  [1m[32mINSERT INTO "balances" ("amount", "wallet_id", "market_id", "cryptocurrency_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["amount", 0.0], ["wallet_id", 4], ["market_id", 1], ["cryptocurrency_id", 2], ["created_at", "2020-11-30 04:24:35.390657"], ["updated_at", "2020-11-30 04:24:35.390657"]]
  ↳ app/controllers/registrations_controller.rb:15:in `create'
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/registrations_controller.rb:15:in `create'
DEPRECATION WARNING: `Module#parent` has been renamed to `module_parent`. `parent` is deprecated and will be removed in Rails 6.1. (called from create at /myapp/app/controllers/registrations_controller.rb:16)
Completed 201 Created in 688ms (Views: 2.8ms | ActiveRecord: 82.7ms | Allocations: 49484)


Started GET "/api/balances/" for 172.21.0.1 at 2020-11-30 04:25:48 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms | Allocations: 980)


Started GET "/api/balances/" for 172.21.0.1 at 2020-11-30 04:26:04 +0000
Processing by BalancesController#index as JSON
  Parameters: {"balance"=>{}}
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms | Allocations: 881)


Started POST "/api/register" for 172.21.0.1 at 2020-11-30 04:29:02 +0000
Processing by RegistrationsController#create as */*
  Parameters: {"id"=>3, "email"=>"jaz@hotmail.com", "created_at"=>"2020-11-30T04:24:35.154Z", "updated_at"=>"2020-11-30T04:24:35.154Z", "name"=>"jazmin", "lastname"=>"juliana", "jti"=>"0038ce31-9c38-4efc-a984-abb8b70d21e6", "partner"=>false, "registration"=>{"id"=>3, "email"=>"jaz@hotmail.com", "created_at"=>"2020-11-30T04:24:35.154Z", "updated_at"=>"2020-11-30T04:24:35.154Z", "name"=>"jazmin", "lastname"=>"juliana", "jti"=>"0038ce31-9c38-4efc-a984-abb8b70d21e6", "partner"=>false}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 750)


param is missing or the value is empty: user excluded from capture: No host specified, no public_key specified, no project_id specified
  
ActionController::ParameterMissing (param is missing or the value is empty: user):
  
app/controllers/registrations_controller.rb:22:in `sign_up_params'
app/controllers/registrations_controller.rb:6:in `create'
